///
/// Post bootstrap variables and utilities configuration
///
/// This must be loaded after Bootstrap variables since it depends on its defaults and
/// utilities API.
///

// Generate cursor utilities
$utilities: map-merge(
    $utilities,
    (
        "cursor": (
            property: cursor,
            values: auto default pointer wait text move help not-allowed
        ),
    )
);

// Customize Bootstrap colors with site colors
$colors: map-merge($colors, $site-colors);
$theme-colors: map-merge($theme-colors, $site-theme);
$theme-colors-rgb: map-loop($theme-colors, to-rgb, "$value");
$link-decoration: none;

// Adapt utilities variables to rebuild them (see utilities settings)
$utilities-colors: $theme-colors-rgb;
$utilities-text: map-merge(
    $utilities-colors,
    (
        "black": to-rgb($black),
        "white": to-rgb($white),
        "body": to-rgb($body-color),
        "grey": to-rgb($grey),
        "gold": to-rgb($gold),
        "greige": to-rgb($greige),
        "blue-mh": to-rgb($blue-mh),
        "blue-primary": to-rgb($blue-primary),
        "blue-secondary": to-rgb($blue-secondary),
    )
);
$utilities-text-colors: map-loop($utilities-text, rgba-css-var, "$key", "text");
$utilities-bg: map-merge(
    $utilities-colors,
    (
        "black": to-rgb($black),
        "white": to-rgb($white),
        "body": to-rgb($body-color),
        "grey": to-rgb($grey),
        "gold": to-rgb($gold),
        "greige": to-rgb($greige),
        "blue-mh": to-rgb($blue-mh),
        "blue-primary": to-rgb($blue-primary),
        "blue-secondary": to-rgb($blue-secondary),
    )
);
$utilities-bg-colors: map-loop($utilities-bg, rgba-css-var, "$key", "bg");

///
/// Bootbutt variables overriding
///

$bb-breakpoints: $grid-breakpoints;

// Enabled font families (usable from utility with `.font-FAMILYNAME`)
$bb-fonts: (
    "lvmh": $font-family-serif,
    "nunito-sans": $font-family-sans-serif,
    "monospace": $font-family-monospace,
);

// Enabled icon sizes for modifiers
$bb-icon-sizes: (
    "small": 0.8em,
    "normal": inherit,
    "large": 3em,
    "wide": 4em,
);

// Bootbutt space variables and map
$bb-space-tiny: (
    "xs": 0.5rem,
    "md": 0.75rem,
    "lg": 1rem,
    "xxl": 1.5rem,
);
$bb-space-short: (
    "xs": 1rem,
    "md": 1.25rem,
    "lg": 2rem,
    "xxl": 2.5rem,
);
$bb-space-normal: (
    "xs": 1.5rem,
    "md": 2rem,
    "lg": 3rem,
    "xxl": 4rem,
);
$bb-space-large: (
    "xs": 2rem,
    "md": 3rem,
    "lg": 4rem,
    "xxl": 5rem,
);
$bb-space-wide: (
    "xs": 3rem,
    "md": 4.5rem,
    "lg": 6rem,
    "xxl": 8rem,
);
$bb-spaces: (
    "tiny": $bb-space-tiny,
    "short": $bb-space-short,
    "normal": $bb-space-normal,
    "large": $bb-space-large,
    "wide": $bb-space-wide,
);

///
/// Bootstrap utilities overriding
///
/// To propagate site colors, font props, etc.. into Bootstrap utilities, it is required
/// to reboot them so they use modified variables from site settings
///

$utilities: map-merge(
    $utilities,
    (
        "color": (
            property: color,
            class: text,
            local-vars: (
                "text-opacity": 1
            ),
            values: map-merge(
                $utilities-text-colors,
                (
                    "muted": $text-muted,
                    "black-50": rgba($black, 0.5),
                    "white-50": rgba($white, 0.5),
                    "reset": inherit,
                )
            )
        ),
        "background-color": (
            property: background-color,
            class: bg,
            local-vars: (
                "bg-opacity": 1
            ),
            values: map-merge(
                $utilities-bg-colors,
                (
                    "transparent": transparent
                )
            )
        ),
        "font-size": (
            rfs: true,
            property: font-size,
            class: fs,
            values: $font-sizes
        ),
    )
);
